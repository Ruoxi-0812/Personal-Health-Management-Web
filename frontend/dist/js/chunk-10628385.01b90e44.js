(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10628385"],{"0f7f":function(t,e,a){"use strict";a("685f")},"12b1":function(t,e,a){"use strict";a("ef59")},"1a6d":function(t,e,a){"use strict";a("5795")},2241:function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("span",{staticClass:"logo"},[e("el-image",{staticStyle:{width:"25px",height:"25px"},attrs:{src:"/logo.png",fit:"fill"}}),t.flag?t._e():e("div",[e("span",{style:{color:t.bag,display:"block"}},[t._v(t._s(t.sysName))])])],1)},i=[],n={name:"Logo",data(){return{}},props:{flag:{type:Boolean,required:!1},sysName:{type:String,required:!1},bag:{type:String,default:"#1c1c1c"}},created(){},methods:{}},o=n,r=(a("1a6d"),a("2877")),l=Object(r["a"])(o,s,i,!1,null,"1dc3616d",null);e["a"]=l.exports},"3c19":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"menu-container"},[e("div",{staticClass:"menu-side",class:{"menu-side-narrow":t.flag}},[e("div",{staticStyle:{display:"flex","align-items":"center"}},[e("Logo",{staticStyle:{padding:"0 40px",margin:"10px 0"},attrs:{sysName:"Healthy Living",flag:t.flag,bag:t.colorLogo}})],1),e("div",{staticStyle:{"margin-top":"12px"}},[e("AdminMenu",{attrs:{flag:t.flag,routes:t.adminRoutes,bag:t.bagMenu},on:{select:t.handleRouteSelect}})],1)]),e("div",{staticClass:"main"},[e("div",{staticClass:"header-section"},[e("LevelHeader",{attrs:{tag:t.tag,userInfo:t.userInfo},on:{eventListener:t.eventListener,selectOperation:t.selectOperation}})],1),e("div",{staticClass:"content-section"},[e("router-view")],1)]),e("el-dialog",{attrs:{"show-close":!1,visible:t.dialogOperaion,width:"26%"},on:{"update:visible":function(e){t.dialogOperaion=e}}},[e("div",{staticStyle:{padding:"25px 0 0 20px"},attrs:{slot:"title"},slot:"title"},[e("span",{staticStyle:{"font-size":"18px","font-weight":"800"}},[t._v("Personal Center")])]),e("el-row",{staticStyle:{padding:"10px 20px 20px 20px"}},[e("el-row",[e("p",{staticStyle:{"font-size":"12px",padding:"3px 0","margin-bottom":"10px"}},[e("span",{staticClass:"modelName"},[t._v("*Avatar")])]),e("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/personal-heath/v1.0/file/upload","show-file-list":!1,"on-success":t.handleAvatarSuccess}},[t.userInfo.url?e("img",{staticStyle:{width:"80px",height:"80px"},attrs:{src:t.userInfo.url}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e("el-row",[e("p",{staticStyle:{"font-size":"12px",padding:"3px 0"}},[e("span",{staticClass:"modelName"},[t._v("*User Name")])]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.userInfo.name,expression:"userInfo.name"}],staticClass:"input-title",attrs:{placeholder:"User Name"},domProps:{value:t.userInfo.name},on:{input:function(e){e.target.composing||t.$set(t.userInfo,"name",e.target.value)}}})]),e("el-row",[e("p",{staticStyle:{"font-size":"12px",padding:"3px 0"}},[e("span",{staticClass:"modelName"},[t._v("*User Email")])]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.userInfo.email,expression:"userInfo.email"}],staticClass:"input-title",attrs:{placeholder:"User Email"},domProps:{value:t.userInfo.email},on:{input:function(e){e.target.composing||t.$set(t.userInfo,"email",e.target.value)}}})])],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticClass:"customer",staticStyle:{"background-color":"rgb(241, 241, 241)",border:"none"},attrs:{size:"small"},on:{click:function(e){t.dialogOperaion=!1}}},[t._v("Cancel")]),e("el-button",{staticClass:"customer",staticStyle:{"background-color":"#15559a",border:"none"},attrs:{size:"small",type:"info"},on:{click:t.updateUserInfo}},[t._v("Revise")])],1)],1)],1)},i=[],n=a("b775"),o=a("a18c"),r=a("5d2d"),l=function(){var t=this,e=t._self._c;return e("el-menu",{staticStyle:{padding:"5px 20px","max-width":"253px"},attrs:{"collapse-transition":!1,collapse:t.flag,"default-active":t.activeIndex,"background-color":t.bag,"text-color":"#666"},on:{select:t.handleSelect}},t._l(t.routes,(function(a,s){return a.children&&0!==a.children.length?t._e():e("el-menu-item",{key:s,class:{"is-active":t.activeIndex===a.path},staticStyle:{width:"100%"},attrs:{index:a.path}},[e("i",{class:a.icon,staticStyle:{"font-size":"20px"}}),e("span",{staticStyle:{"font-size":"14px"},attrs:{slot:"title"},slot:"title"},[t._v(t._s(a.name))])])})),1)},c=[],u={name:"AdminMenu",data(){return{activeIndex:"1",isCollapse:!0,selectedMenuItem:""}},props:{routes:{type:Array,required:!0},flag:{type:Boolean,required:!0},bag:{type:String,default:"#FFFFFF"}},created(){const t=sessionStorage.getItem("activeMenuItem");null===t?this.handleSelect("/adminLayout"):this.handleSelect(t)},methods:{handleSelect(t){this.activeIndex=t,this.$emit("select",this.activeIndex),sessionStorage.setItem("activeMenuItem",this.activeIndex)}}},d=u,p=(a("f640"),a("2877")),g=Object(p["a"])(d,l,c,!1,null,"4d7191c5",null),f=g.exports,m=a("2241"),h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main"},[e("span",[e("span",{staticClass:"operation-span",on:{click:t.operation}},[t.showFlag?e("i",{staticClass:"el-icon-s-unfold i-folder"}):e("i",{staticClass:"el-icon-s-fold i-folder"})])]),e("span",[e("span",{staticClass:"operation-span-tag"},[t._v(" backstage  /  "+t._s(""==t.tag?"metadata":t.tag)+" ")])]),e("span",{staticClass:"user-block"},[e("el-dropdown",{staticClass:"user-dropdown"},[e("span",{staticClass:"el-dropdown-link",staticStyle:{display:"flex","align-items":"center"}},[e("el-avatar",{staticStyle:{"margin-top":"0"},attrs:{size:35,src:t.userInfo.url}}),e("span",{staticClass:"userName",staticStyle:{"margin-left":"5px","font-size":"16px"}},[t._v(t._s(t.userInfo.name))]),e("i",{staticClass:"el-icon-arrow-down el-icon--right",staticStyle:{"margin-left":"5px"}})],1),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{attrs:{icon:"el-icon-user-solid"},nativeOn:{click:function(e){return t.userCenterPanel.apply(null,arguments)}}},[t._v("Personal Information")]),e("el-dropdown-item",{attrs:{icon:"el-icon-s-fold"},nativeOn:{click:function(e){return t.loginOut.apply(null,arguments)}}},[t._v("Log out")])],1)],1)],1)])},v=[],x={name:"LevelHeader",data(){return{showFlag:"true"===sessionStorage.getItem("flag")}},props:{tag:{type:String,required:!0,default:""},userInfo:{type:Object,required:!0,default:{}},bag:{type:String,default:""}},methods:{userCenterPanel(){this.$emit("eventListener","center")},loginOut(){this.$emit("eventListener","loginOut")},operation(){this.showFlag=!this.showFlag,sessionStorage.setItem("flag",this.showFlag),this.$emit("selectOperation",this.showFlag)}}},w=x,y=(a("12b1"),Object(p["a"])(w,h,v,!1,null,"73309676",null)),S=y.exports,b={name:"Admin",components:{Logo:m["a"],LevelHeader:S,AdminMenu:f},data(){return{adminRoutes:[],activeIndex:"",userInfo:{id:null,url:"",name:"",role:null,email:""},flag:!1,tag:"Visualization",bag:"rgb(246,246,246)",colorLogo:"rgb(51,51,51)",bagMenu:"rgb(248,248,248)",dialogOperaion:!1}},created(){let t=o["a"].options.routes.filter(t=>"/admin"==t.path)[0];this.adminRoutes=t.children,this.tokenCheckLoad(),this.menuOperationHistory()},methods:{async updateUserInfo(){try{const t={userAvatar:this.userInfo.url,userName:this.userInfo.name,userEmail:this.userInfo.email},e=await this.$axios.put("/user/update",t),{data:a}=e;200===a.code&&(this.dialogOperaion=!1,this.tokenCheckLoad(),this.$swal.fire({title:"Modification of personal information",text:a.msg,icon:"success",showConfirmButton:!1,timer:1e3}))}catch(t){this.dialogOperaion=!1,this.$swal.fire({title:"Modification of personal information Error",text:t,icon:"error",showConfirmButton:!1,timer:2e3}),console.error("Modification of personal information Error:"+t)}},handleAvatarSuccess(t,e){200===t.code?(this.$message.success("Avatar upload success"),this.userInfo.url=t.data):this.$message.error("Avatar upload error")},eventListener(t){"center"===t&&(this.dialogOperaion=!0),"loginOut"===t&&this.loginOut()},async loginOut(){const t=await this.$swalConfirm({title:"Logging out?",text:"Need to log in again after logging out?",icon:"warning"});t&&(this.$swal.fire({title:"Exit Login Successful",text:"1s and then return to the login page",icon:"success",showConfirmButton:!1,timer:1e3}),setTimeout(()=>{Object(r["a"])(),this.$router.push("/login")},1e3))},menuOperationHistory(){this.flag="true"===sessionStorage.getItem("flag")},selectOperation(t){this.flag=t},handleRouteSelect(t){let e=this.adminRoutes.filter(e=>e.path==t);this.tag=e[0].name,this.$router.currentRoute.fullPath!=t&&this.$router.push(t)},async tokenCheckLoad(){try{const t=await n["a"].get("user/auth");if(400===t.data.code)return this.$message.error(t.data.msg),void this.$router.push("/login");const{id:e,userAvatar:a,userName:s,userRole:i,userEmail:r}=t.data.data;this.userInfo={id:e,url:a,name:s,role:i,email:r};const l=1===i?"/admin":"/user",c=o["a"].options.routes.find(t=>t.path===l);c?this.routers=c.children:console.warn("A route corresponding to the role was not found: "+l)}catch(t){console.error("An error occurred while obtaining user authentication information:",t),this.$message.error("Authentication information failed to load, please try again!")}}}},I=b,C=(a("0f7f"),Object(p["a"])(I,s,i,!1,null,"061edf93",null));e["default"]=C.exports},5795:function(t,e,a){},"685f":function(t,e,a){},d947:function(t,e,a){},ef59:function(t,e,a){},f640:function(t,e,a){"use strict";a("d947")}}]);
//# sourceMappingURL=chunk-10628385.01b90e44.js.map