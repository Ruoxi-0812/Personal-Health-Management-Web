(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50567964"],{"3bef":function(e,t,a){},"4bd8":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"line-main"},[t("div",[t("span",{staticClass:"tag"},[e._v(e._s(e.tag))]),t("span",{staticClass:"time-show"},[t("span",{staticClass:"top-bar",staticStyle:{"font-size":"12px"}},[e._v("Timing")]),t("el-select",{staticStyle:{width:"90px"},attrs:{size:"mini",placeholder:"deadlines"},model:{value:e.selectedValue,callback:function(t){e.selectedValue=t},expression:"selectedValue"}},e._l(e.options,(function(e){return t("el-option",{key:e.num,attrs:{label:e.name,value:e.num}})})),1)],1)]),t("div",{ref:"chart",style:{width:"100%",height:e.height}})])},l=[],s=a("313e"),o={name:"DialogLine",props:{tag:{type:String,default:"LineChart"},values:{type:Array,required:!0},date:{type:Array,required:!0},height:{type:String,default:"220px"}},watch:{selectedValue:{handler(e,t){this.$emit("on-selected",e)},deep:!0,immediate:!1},values:{handler(e,t){this.initChart()},deep:!0,immediate:!1}},data(){return{chart:null,options:[{num:7,name:"Within 7 days"},{num:30,name:"Within 30 days"},{num:60,name:"Within 60 days"}],selectedValue:""}},methods:{initChart(){this.chart=s["init"](this.$refs.chart);let e={grid:{left:30,right:10,top:50,borderWidth:0},title:{text:"",color:"#ffffff"},tooltip:{trigger:"axis",formatter:"{b}->{c}"},legend:{data:[""]},xAxis:{data:this.date,axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:"rgb(51，51，51)",fontSize:"14"}},yAxis:{axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:"rgb(51，51，51)",fontSize:"14"}},series:[{name:"",type:"line",smooth:!0,data:this.values,areaStyle:{color:"rgba(144, 191, 237, 0.3)"},lineStyle:{color:"#5B8FF9"},itemStyle:{color:"#5B8FF9",borderColor:"#5B8FF9",borderWidth:2},label:{show:!0,position:"top",color:"rgb(102, 102, 102)"}}]};this.chart.setOption(e)}},beforeDestroy(){this.chart&&this.chart.dispose()}},r=o,n=(a("fe1f"),a("2877")),h=Object(n["a"])(r,i,l,!1,null,"d615d816",null);t["a"]=h.exports},5329:function(e,t,a){"use strict";a("5d66")},"5d66":function(e,t,a){},"6c44":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticStyle:{"border-radius":"5px",padding:"20px 0 60px 0",width:"100%","background-color":"#fafafa"}},[t("div",{staticStyle:{height:"100px","line-height":"100px","text-align":"center","font-size":"24px"}},[e._v(" Healthy Living, Healthy Life, Start Now! ")]),t("div",{staticStyle:{height:"50px","line-height":"50px","text-align":"center","font-size":"30px","font-weight":"bolder"}},[e._v(" Every little change is worth recording. "),t("span",{staticStyle:{cursor:"pointer",padding:"5px 10px","background-color":"#000","border-radius":"5px",color:"#fff"},on:{click:e.toRecord}},[e._v(" Go to Record "),t("i",{staticClass:"el-icon-right"})])])]),t("div",{staticStyle:{padding:"30px 0"}},[t("div",{staticStyle:{margin:"20px 0"}},[t("el-select",{attrs:{size:"small",placeholder:"Please select"},on:{change:e.modelChange},model:{value:e.userHealthQueryDto.healthModelConfigId,callback:function(t){e.$set(e.userHealthQueryDto,"healthModelConfigId",t)},expression:"userHealthQueryDto.healthModelConfigId"}},e._l(e.usersHealthModelConfig,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("div",[t("LineChart",{attrs:{height:"500px",tag:"",values:e.values,date:e.dates},on:{"on-selected":e.onSelectedTime}})],1)]),t("div",[t("h2",{staticStyle:{"padding-left":"20px","border-left":"2px solid rgb(43, 121, 203)"}},[e._v("Health Indicator Data")]),t("el-row",{staticStyle:{padding:"10px","margin-left":"10px"}},[t("el-row",{staticStyle:{display:"flex","justify-content":"left","align-items":"center",gap:"10px"}},[t("el-select",{attrs:{size:"small",placeholder:"Select Model"},on:{change:e.fetchFreshData},model:{value:e.healthModelConfigId,callback:function(t){e.healthModelConfigId=t},expression:"healthModelConfigId"}},[t("el-option",{key:null,attrs:{label:"All",value:null}}),e._l(e.usersHealthModelConfig,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],2),t("el-date-picker",{staticStyle:{width:"220px"},attrs:{size:"small",type:"daterange","range-separator":"to","start-placeholder":"Start Date","end-placeholder":"End Date"},on:{change:e.timeChange},model:{value:e.searchTime,callback:function(t){e.searchTime=t},expression:"searchTime"}})],1)],1),t("el-row",{staticStyle:{margin:"0 20px","border-top":"1px solid rgb(245,245,245)"}},[t("el-table",{attrs:{"row-key":"id",data:e.tableData},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{prop:"name",label:"Indicator"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[t("i",{staticClass:"el-icon-paperclip",staticStyle:{"margin-right":"3px"}}),e._v(e._s(a.row.name))])]}}])}),t("el-table-column",{attrs:{prop:"value",width:"148",label:"Value",sortable:""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticStyle:{"font-weight":"800"}},[e._v(e._s(a.row.value)+" "+e._s(a.row.unit))])]}}])}),t("el-table-column",{attrs:{prop:"symbol",width:"108",label:"Model Symbol"}}),t("el-table-column",{attrs:{prop:"name",width:"88",label:"Status"},scopedSlots:e._u([{key:"default",fn:function(a){return[e.statusCheck(a.row)?t("i",{staticClass:"el-icon-success",staticStyle:{"margin-right":"5px",color:"rgb(253, 199, 50)"}}):t("i",{staticClass:"el-icon-warning",staticStyle:{"margin-right":"5px"}}),e.statusCheck(a.row)?t("span",[e._v("Normal")]):t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Abnormal indicator, remind user to take action",placement:"bottom-end"}},[t("span",{staticStyle:{"text-decoration":"underline","text-decoration-style":"dashed"}},[e._v("Abnormal")])])]}}])}),t("el-table-column",{attrs:{prop:"createTime",width:"178",label:"Record Time",sortable:""}}),t("el-table-column",{attrs:{label:"Actions",width:"80"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticClass:"text-button",on:{click:function(t){return e.handleDelete(a.row)}}},[e._v("Delete")])]}}])})],1),t("el-pagination",{staticStyle:{margin:"20px 0"},attrs:{"current-page":e.currentPage,"page-sizes":[10,20],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalItems},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])},l=[],s=a("4bd8"),o={components:{LineChart:s["a"]},data(){return{usersHealthModelConfig:[],modelConfigList:[],userHealthQueryDto:{},values:[],dates:[],tableData:[],selectedRows:[],currentPage:1,pageSize:20,totalItems:0,searchTime:[],healthModelConfigId:null}},created(){this.loadHealthModelConfig(),this.fetchFreshData()},methods:{timeChange(){this.current=1,this.fetchFreshData()},handleDelete(e){this.selectedRows.push(e),this.batchDelete()},statusCheck(e){const t=e.value,a=e.valueRange;if(null!==a&&null!==t){const e=a.split(","),i=e[0],l=e[1];return Number(t)>Number(i)&&Number(t)<Number(l)}},async batchDelete(){if(!this.selectedRows.length)return void this.$message("No data selected");const e=await this.$swalConfirm({title:"Delete Health Record Data",text:"Once deleted, it cannot be recovered. Do you want to continue?",icon:"warning"});if(e)try{let e=this.selectedRows.map(e=>e.id);const t=await this.$axios.post("/user-health/batchDelete",e);if(200===t.data.code)return this.$swal.fire({title:"Delete Notification",text:t.data.msg,icon:"success",showConfirmButton:!1,timer:2e3}),void this.fetchFreshData()}catch(t){this.$swal.fire({title:"Error Notification",text:t,icon:"error",showConfirmButton:!1,timer:2e3}),console.error("Error deleting user health record information:",t)}},handleFilter(){this.currentPage=1,this.fetchFreshData()},async fetchFreshData(){try{let e=null,t=null;if(null!=this.searchTime&&2===this.searchTime.length){const[a,i]=await Promise.all(this.searchTime.map(e=>e.toISOString()));e=a.split("T")[0]+"T00:00:00",t=i.split("T")[0]+"T23:59:59"}const a=sessionStorage.getItem("userInfo"),i=JSON.parse(a),l={current:this.currentPage,size:this.pageSize,startTime:e,endTime:t,healthModelConfigId:this.healthModelConfigId,userId:i.id},s=await this.$axios.post("/user-health/query",l),{data:o}=s;this.tableData=o.data,this.totalItems=o.total}catch(e){console.error("Error querying user health record information:",e)}},handleFilterClear(){this.filterText="",this.handleFilter()},handleSelectionChange(e){this.selectedRows=e},resetQueryCondition(){this.searchTime=[],this.healthModelConfigId=null,this.fetchFreshData()},handleSizeChange(e){this.pageSize=e,this.currentPage=1,this.fetchFreshData()},handleCurrentChange(e){this.currentPage=e,this.fetchFreshData()},loadUserModelHavaRecord(){this.$axios.get(`/user-health/timeQuery/${this.userHealthQueryDto.healthModelConfigId}/${this.userHealthQueryDto.time}`).then(e=>{const{data:t}=e;200===t.code&&(this.values=t.data.map(e=>e.value).reverse(),this.dates=t.data.map(e=>e.createTime).reverse())})},modelChange(e){this.loadUserModelHavaRecord()},modelUserChange(){this.fetchFreshData()},loadHealthModelConfig(){this.$axios.post("/health-model-config/modelList").then(e=>{const{data:t}=e;200===t.code&&(this.usersHealthModelConfig=t.data,this.modelConfigList=t.data,this.defaultLoad())})},defaultLoad(){this.userHealthQueryDto.healthModelConfigId=this.usersHealthModelConfig[0].id,this.userHealthQueryDto.time=365,this.loadUserModelHavaRecord()},onSelectedTime(e){this.userHealthQueryDto.time=e,this.loadUserModelHavaRecord()},timeSelected(){},toRecord(){this.$router.push("/record")}}},r=o,n=(a("5329"),a("2877")),h=Object(n["a"])(r,i,l,!1,null,"61cabc1c",null);t["default"]=h.exports},fe1f:function(e,t,a){"use strict";a("3bef")}}]);
//# sourceMappingURL=chunk-50567964.c0586dd3.js.map