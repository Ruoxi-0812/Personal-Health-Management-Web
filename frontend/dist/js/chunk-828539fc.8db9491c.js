(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-828539fc"],{"62e6":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("el-row",{staticStyle:{"background-color":"#FFFFFF",padding:"5px 0","border-radius":"5px"}},[e("el-row",{staticStyle:{padding:"10px","margin-left":"10px"}},[e("el-row",[e("el-select",{attrs:{size:"small",placeholder:"News Category"},on:{change:t.changeNewsTag},model:{value:t.newsQueryDto.tagId,callback:function(e){t.$set(t.newsQueryDto,"tagId",e)},expression:"newsQueryDto.tagId"}},t._l(t.tagsList,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),e("el-date-picker",{staticStyle:{"margin-left":"5px",width:"220px"},attrs:{size:"small",type:"daterange","range-separator":"to","start-placeholder":"Publish Start","end-placeholder":"Publish End"},model:{value:t.searchTime,callback:function(e){t.searchTime=e},expression:"searchTime"}}),e("el-input",{staticStyle:{width:"188px","margin-left":"5px","margin-right":"6px"},attrs:{size:"small",placeholder:"News Title",clearable:""},on:{clear:t.handleFilterClear},model:{value:t.newsQueryDto.name,callback:function(e){t.$set(t.newsQueryDto,"name",e)},expression:"newsQueryDto.name"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.handleFilter},slot:"append"})],1),e("span",{staticStyle:{float:"right"}},[e("el-button",{staticClass:"customer",staticStyle:{"background-color":"rgb(96, 98, 102)",color:"rgb(247,248,249)",border:"none"},attrs:{size:"small",type:"info"},on:{click:function(e){return t.add()}}},[e("i",{staticClass:"el-icon-plus"}),t._v("Add News")])],1)],1)],1),e("el-row",{staticStyle:{margin:"0 20px","border-top":"1px solid rgb(245,245,245)"}},[e("el-table",{staticStyle:{width:"100%"},attrs:{"row-key":"id",data:t.tableData},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{prop:"cover",width:"80",label:"Cover"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("img",{staticStyle:{width:"48px",height:"34px","border-radius":"5px"},attrs:{src:t.row.cover}})]}}])}),e("el-table-column",{attrs:{prop:"tagName",width:"138",label:"Category"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[e("i",{staticClass:"el-icon-discount",staticStyle:{"margin-right":"3px"}}),t._v(" "+t._s(a.row.tagName)+" ")])]}}])}),e("el-table-column",{attrs:{prop:"isTop",width:"128",label:"Recommended"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.isTop?e("i",{staticClass:"el-icon-success",staticStyle:{"margin-right":"5px",color:"rgb(253, 199, 50)"}}):e("i",{staticClass:"el-icon-warning",staticStyle:{"margin-right":"5px"}}),a.row.isTop?e("span",[t._v("Recommended")]):e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Not recommended, will not be displayed",placement:"bottom-end"}},[e("span",{staticStyle:{cursor:"pointer","text-decoration":"underline","text-decoration-style":"dashed"}},[t._v("Not Recommended")])])]}}])}),e("el-table-column",{attrs:{prop:"createTime",width:"168",label:"Publish Time"}}),e("el-table-column",{attrs:{prop:"name",label:"Title"}}),e("el-table-column",{attrs:{label:"Actions",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"text-button",on:{click:function(e){return t.handleEdit(a.row)}}},[t._v("Edit")]),e("span",{staticClass:"text-button",on:{click:function(e){return t.handleDelete(a.row)}}},[t._v("Delete")])]}}])})],1),e("el-pagination",{staticStyle:{margin:"20px 0"},attrs:{"current-page":t.currentPage,"page-sizes":[10,20],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.totalItems},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),e("el-dialog",{attrs:{"show-close":!1,visible:t.dialogUserOperaion,width:"50%"},on:{"update:visible":function(e){t.dialogUserOperaion=e}}},[e("div",{attrs:{slot:"title"},slot:"title"},[e("p",{staticClass:"dialog-title"},[t._v(t._s(t.isOperation?"Edit News":"Add News"))])]),e("div",{staticStyle:{padding:"0 20px"}},[e("el-row",{staticStyle:{"margin-top":"10px"}},[e("p",[t._v("*Cover")]),e("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/personal-heath/v1.0/file/upload","show-file-list":!1,"on-success":t.handleAvatarSuccess}},[t.data.cover?e("img",{staticStyle:{height:"120px",width:"188px"},attrs:{src:t.data.cover}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e("el-row",[e("p",[t._v("*Title")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.name,expression:"data.name"}],staticClass:"dialog-input",staticStyle:{"font-size":"32px","line-height":"45px"},attrs:{placeholder:"Title"},domProps:{value:t.data.name},on:{input:function(e){e.target.composing||t.$set(t.data,"name",e.target.value)}}})]),e("el-row",{staticStyle:{margin:"12px 0"}},[e("el-row",[e("span",{staticClass:"dialog-hover"},[t._v("Category")])]),e("el-radio-group",{staticStyle:{"margin-top":"10px"},model:{value:t.data.tagId,callback:function(e){t.$set(t.data,"tagId",e)},expression:"data.tagId"}},t._l(t.tagsList,(function(a,s){return e("el-radio",{key:s,attrs:{label:a.id}},[t._v(t._s(a.name))])})),1)],1),e("el-row",{staticStyle:{margin:"12px 0"}},[e("el-row",[e("span",{staticClass:"dialog-hover"},[t._v("Recommended")])]),e("el-switch",{staticStyle:{"user-select":"none",padding:"0 6px"},attrs:{"active-color":"#13ce66","inactive-color":"rgb(226, 226, 226)"},model:{value:t.data.isTop,callback:function(e){t.$set(t.data,"isTop",e)},expression:"data.isTop"}})],1),e("el-row",[e("p",[t._v("*Content Description")]),e("Editor",{attrs:{height:"calc(100vh - 500px)",receiveContent:t.data.content},on:{"on-receive":t.onReceiveContent}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t.isOperation?e("el-button",{staticClass:"customer",staticStyle:{"background-color":"rgb(96, 98, 102)",color:"rgb(247,248,249)",border:"none"},attrs:{size:"small",type:"info"},on:{click:function(e){return t.updateOperation()}}},[t._v("Edit")]):e("el-button",{staticClass:"customer",staticStyle:{"background-color":"rgb(96, 98, 102)",color:"rgb(247,248,249)",border:"none"},attrs:{size:"small",type:"info"},on:{click:function(e){return t.addOperation()}}},[t._v("Add")]),e("el-button",{staticClass:"customer",staticStyle:{"background-color":"rgb(241, 241, 241)",border:"none"},attrs:{size:"small"},on:{click:function(e){t.dialogUserOperaion=!1}}},[t._v("Cancel")])],1)])],1)},i=[],o=a("ceb0"),r={components:{Editor:o["a"]},data(){return{userPwd:"",data:{cover:""},filterText:"",currentPage:1,pageSize:10,totalItems:0,dialogUserOperaion:!1,isOperation:!1,tableData:[],searchTime:[],selectedRows:[],status:null,newsQueryDto:{},messsageContent:"",tagsList:[]}},created(){this.fetchFreshData(),this.loadAllTags()},methods:{changeNewsTag(t){this.newsQueryDto.tagId=t,this.fetchFreshData()},onReceiveContent(t){this.data.content=t},loadAllTags(){this.$axios.post("/tags/query",{}).then(t=>{const{data:e}=t;200===e.code&&(this.tagsList=e.data,this.tagsList.unshift({name:"All",id:null}))})},handleAvatarSuccess(t,e){200===t.code?(this.data.cover="",this.$message.success("News cover uploaded successfully"),this.data.cover=t.data):this.$message.error("News cover upload failed")},handleSelectionChange(t){this.selectedRows=t},async batchDelete(){if(!this.selectedRows.length)return void this.$message("No data selected");const t=await this.$swalConfirm({title:"Delete News Data",text:"Deletion is irreversible, do you want to continue?",icon:"warning"});if(t)try{let t=this.selectedRows.map(t=>t.id);const e=await this.$axios.post("/news/batchDelete",t);if(200===e.data.code)return this.$swal.fire({title:"Delete Notification",text:e.data.msg,icon:"success",showConfirmButton:!1,timer:2e3}),void this.fetchFreshData()}catch(e){this.$swal.fire({title:"Error Notification",text:e,icon:"error",showConfirmButton:!1,timer:2e3}),console.error("News deletion error:",e)}},resetQueryCondition(){this.newsQueryDto={},this.searchTime=[],this.fetchFreshData()},async updateOperation(){try{const t=await this.$axios.put("/news/update",this.data);this.$swal.fire({title:"News Update",text:t.data.msg,icon:200===t.data.code?"success":"error",showConfirmButton:!1,timer:1e3}),200===t.data.code&&(this.closeDialog(),this.fetchFreshData(),this.clearFormData())}catch(t){console.error("Error submitting form:",t),this.$message.error("Submission failed, please try again later!")}},async addOperation(){try{const t=await this.$axios.post("/news/save",this.data);this.$message[200===t.data.code?"success":"error"](t.data.msg),200===t.data.code&&(this.closeDialog(),this.fetchFreshData(),this.clearFormData())}catch(t){console.error("Error submitting form:",t),this.$message.error("Submission failed, please try again later!")}},closeDialog(){this.dialogUserOperaion=!1},clearFormData(){this.data={}},async fetchFreshData(){try{let t=null,e=null;if(null!=this.searchTime&&2===this.searchTime.length){const[a,s]=await Promise.all(this.searchTime.map(t=>t.toISOString()));t=a.split("T")[0]+"T00:00:00",e=s.split("T")[0]+"T23:59:59"}const a={current:this.currentPage,size:this.pageSize,startTime:t,endTime:e,...this.newsQueryDto},s=await this.$axios.post("/news/query",a),{data:i}=s;this.tableData=i.data,this.totalItems=i.total}catch(t){console.error("Error fetching news data:",t)}},add(){this.dialogUserOperaion=!0},handleFilter(){this.currentPage=1,this.fetchFreshData()},handleFilterClear(){this.filterText="",this.handleFilter()},handleSizeChange(t){this.pageSize=t,this.currentPage=1,this.fetchFreshData()},handleCurrentChange(t){this.currentPage=t,this.fetchFreshData()},handleEdit(t){this.dialogUserOperaion=!0,this.isOperation=!0,t.userPwd=null,this.data={...t}},handleDelete(t){this.selectedRows.push(t),this.batchDelete()}}},l=r,n=(a("755a"),a("2877")),c=Object(n["a"])(l,s,i,!1,null,"6ad749a1",null);e["default"]=c.exports},"755a":function(t,e,a){"use strict";a("a2ba")},a2ba:function(t,e,a){}}]);
//# sourceMappingURL=chunk-828539fc.8db9491c.js.map