(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-640dff02"],{"1a6d":function(e,s,t){"use strict";t("5795")},2241:function(e,s,t){"use strict";var a=function(){var e=this,s=e._self._c;return s("span",{staticClass:"logo"},[s("el-image",{staticStyle:{width:"25px",height:"25px"},attrs:{src:"/logo.png",fit:"fill"}}),e.flag?e._e():s("div",[s("span",{style:{color:e.bag,display:"block"}},[e._v(e._s(e.sysName))])])],1)},i=[],n={name:"Logo",data(){return{}},props:{flag:{type:Boolean,required:!1},sysName:{type:String,required:!1},bag:{type:String,default:"#1c1c1c"}},created(){},methods:{}},o=n,l=(t("1a6d"),t("2877")),r=Object(l["a"])(o,a,i,!1,null,"1dc3616d",null);s["a"]=r.exports},5795:function(e,s,t){},"6ecb":function(e,s,t){"use strict";t("d863")},"6fff":function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e._self._c;return s("div",[s("div",{staticStyle:{"line-height":"70px",padding:"0 50px"}},[s("el-row",[s("el-col",{attrs:{span:6}},[s("Logo",{attrs:{sysName:"Healthy Living"}})],1),s("el-col",{attrs:{span:18}},[s("span",{staticStyle:{float:"right",display:"flex","align-items":"center","flex-wrap":"wrap"}},[s("img",{staticStyle:{width:"30px",height:"30px","border-radius":"15px"},attrs:{src:e.userInfo.userAvatar}}),s("span",{staticStyle:{"margin-left":"8px"}},[e._v(e._s(e.userInfo.userName))])])])],1)],1),s("div",{staticStyle:{height:"20px","background-color":"rgb(248, 248, 248)"}}),s("div",{staticStyle:{padding:"10px 50px"}},[s("div",[s("p",{staticStyle:{"font-size":"16px",padding:"10px 0"}},[e._v(" Message Center "),s("span",{staticClass:"clear-message",on:{click:e.clearMessage}},[s("i",{staticClass:"el-icon-s-open"})])])]),s("div",e._l(e.messageTypes,(function(t,a){return s("span",{key:a,staticClass:"message-type",on:{click:function(s){return e.messageTypeSelected(t.type)}}},[e._v(" "+e._s(t.detail)+" ")])})),0),s("div",{staticStyle:{padding:"30px 0"}},[0===e.messageList.length?s("div",[s("el-empty",{attrs:{description:"No messages available"}})],1):e._e(),s("div",e._l(e.messageList,(function(t,a){return s("div",{key:a,staticStyle:{"margin-bottom":"5px",padding:"5px","border-radius":"5px"},style:{backgroundColor:t.isRead?"":"rgb(248,248,248)"}},[s("el-row",{staticStyle:{padding:"15px 0"}},[s("el-col",{attrs:{span:1}},[s("span",{staticClass:"bell-icon"},[1===t.messageType||2===t.messageType?s("span",[s("img",{staticStyle:{width:"30px",height:"30px","border-radius":"20px"},attrs:{src:t.senderAvatar,alt:"",srcset:""}})]):e._e(),3===t.messageType?s("i",{staticClass:"el-icon-data-analysis"}):e._e()])]),s("el-col",{attrs:{span:23}},[s("div",[1===t.messageType||2===t.messageType?s("div",[s("div",[e._v(" "+e._s(t.senderName)+" ")])]):e._e(),s("div",[1===t.messageType?s("span",{staticClass:"message-content",staticStyle:{"font-size":"14px"}},[e._v(e._s(e.commentDeal(t.content)[2]))]):s("span",{staticClass:"message-content",staticStyle:{"font-size":"14px"}},[e._v(e._s(t.content))])])]),s("div",[s("span",{staticClass:"message-time"},[e._v(e._s(t.createTime))]),1===t.messageType?s("span",{staticStyle:{"font-size":"10px","margin-left":"10px",cursor:"pointer"},on:{click:function(s){return e.replyUser(t)}}},[e._v("Reply")]):e._e()])])],1)],1)})),0)])])])},i=[],n=t("2241"),o=t("3d20"),l=t.n(o),r={components:{Logo:n["a"]},data(){return{userInfo:{},messageQueryDto:{},messageList:[],messageTypes:[],dialogEvaluationsOperation:!1,message:{}}},created(){this.getUserInfo(),this.loadAllUsersMessage(),this.loadAllMessageType()},methods:{commentDeal(e){return e.split(";")},replyUser(e){l.a.fire({title:`Reply to 【${e.senderName}】`,input:"text",inputPlaceholder:"Enter your reply",showCancelButton:!0,confirmButtonText:"Submit",cancelButtonText:"Cancel",inputValidator:s=>{if(!s)return"Content cannot be empty";this.saveCommentData(e.senderId,s,this.commentDeal(e.content))}}).then(e=>{console.log("...")})},saveCommentData(e,s,t){const a={content:s,parentId:t[0],contentType:"NEWS",contentId:t[1],replierId:e};this.$axios.post("/evaluations/insert",a).then(e=>{const{data:s}=e;200===s.code&&this.$notify({title:"Comment Reply",message:"Reply successful",type:"success"})}).catch(e=>{console.log("Reply error:",e)})},async clearMessage(){const e=await this.$swalConfirm({title:"Clear Messages",text:"Do you want to mark all messages as read?",icon:"warning"});e&&this.$axios.put("/message/clearMessage").then(e=>{const{data:s}=e;200===s.code&&this.loadAllUsersMessage()})},evaluationsPut(){this.$axios.put("/message/clearMessage").then(e=>{const{data:s}=e;200===s.code&&this.loadAllUsersMessage()})},replyEvalustions(e){this.message=e,this.dialogEvaluationsOperation=!0},messageTypeSelected(e){this.messageQueryDto.messageType=e,this.loadAllUsersMessage()},getUserInfo(){const e=sessionStorage.getItem("userInfo");this.userInfo=JSON.parse(e)},loadAllMessageType(){this.$axios.get("/message/types").then(e=>{const{data:s}=e;if(200===s.code){this.messageTypes=s.data;const e={type:null,detail:"All Messages"};this.messageTypes.unshift(e),this.messageTypes.map(e=>e.isCheck=!1)}})},loadAllUsersMessage(){const e=sessionStorage.getItem("userInfo"),s=JSON.parse(e);this.messageQueryDto.userId=s.id,this.$axios.post("/message/query",this.messageQueryDto).then(e=>{const{data:s}=e;200===s.code&&(this.messageList=s.data)})}}},c=r,p=(t("6ecb"),t("2877")),d=Object(p["a"])(c,a,i,!1,null,"cb3631fe",null);s["default"]=d.exports},d863:function(e,s,t){}}]);
//# sourceMappingURL=chunk-640dff02.76ab9533.js.map