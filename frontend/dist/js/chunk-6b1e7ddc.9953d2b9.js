(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b1e7ddc"],{5913:function(t,e,a){"use strict";a("d200")},"748a":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"line-main",style:{backgroundColor:t.bag}},[e("div",{ref:"chart",style:{width:t.width,height:t.height}})])},i=[],o=a("313e"),n={name:"PieChart",props:{types:{type:Array,default:[]},values:{type:Array,default:[]},width:{type:String,default:"100%"},height:{type:String,default:"243px"},bag:{type:String,default:"#fff"},fontColor:{type:String,default:"#333"}},data(){return{chart:null}},watch:{types(t,e){this.initChart()}},mounted(){this.initChart()},methods:{initChart(){this.chart=o["init"](this.$refs.chart);let t={title:{text:"",subtext:"",left:"center"},tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left",show:!1},series:[{name:"",type:"pie",radius:"70%",avoidLabelOverlap:!1,label:{show:!1,position:"center"},emphasis:{label:{show:!1,fontSize:"24",fontWeight:"600"}},labelLine:{show:!0},label:{show:!0,position:"outer",formatter:"{d}%"},data:this.values.map((t,e)=>({name:this.types[e],value:t})),itemStyle:{color:function(t){const e=["#FF6347","#FFD700","#0885f9","#FF69B4","#9370DB","#00FFFF","#b84031"];return e[t.dataIndex%e.length]}}}]};this.chart.setOption(t)}},beforeDestroy(){this.chart&&this.chart.dispose()}},l=n,r=(a("5913"),a("2877")),c=Object(r["a"])(l,s,i,!1,null,"1cc5f778",null);e["a"]=c.exports},9622:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("el-row",{staticStyle:{"background-color":"#FFFFFF",padding:"10px 0","border-radius":"5px"}},[e("el-row",{staticStyle:{padding:"10px",margin:"0 10px"}},[e("el-row",[e("el-date-picker",{staticStyle:{width:"220px"},attrs:{size:"small",type:"daterange","range-separator":"è‡³","start-placeholder":"Comments begin","end-placeholder":"Comments end"},model:{value:t.searchTime,callback:function(e){t.searchTime=e},expression:"searchTime"}}),e("el-input",{staticStyle:{width:"188px","margin-left":"5px","margin-right":"6px"},attrs:{size:"small",placeholder:"Comments content",clearable:""},on:{clear:t.handleFilterClear},model:{value:t.evalustionsQueryDto.content,callback:function(e){t.$set(t.evalustionsQueryDto,"content",e)},expression:"evalustionsQueryDto.content"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.handleFilter},slot:"append"})],1)],1)],1),e("el-row",{staticStyle:{margin:"0 20px","border-top":"1px solid rgb(245,245,245)"}},[e("el-table",{staticStyle:{width:"100%"},attrs:{"row-key":"id",data:t.tableData},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{prop:"content",label:"text"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:a.row.content,placement:"bottom"}},[e("div",{staticClass:"cell-name"},[t._v(t._s(a.row.content))])])]}}])}),e("el-table-column",{attrs:{prop:"upvoteList",width:"60",label:"like"},scopedSlots:t._u([{key:"default",fn:function(a){return[null!==a.row.upvoteList?e("span",{staticStyle:{"font-size":"16px","font-weight":"bolder"}},[t._v(t._s(a.row.upvoteList.split(",").length))]):e("span",{staticStyle:{"font-size":"16px","font-weight":"bolder"}},[t._v("0")])]}}])}),e("el-table-column",{attrs:{prop:"contentType",width:"100",label:"Mount Source"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.contentType))])]}}])}),e("el-table-column",{attrs:{prop:"createTime",width:"168",label:"Comment on"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.createTime))])]}}])}),e("el-table-column",{attrs:{prop:"userName",width:"120",label:"Commentator"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{domProps:{innerHTML:t._s(t.highlightKeyword(a.row.userName))}})]}}])}),e("el-table-column",{attrs:{prop:"replierName",width:"120",label:"Commented on"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{domProps:{innerHTML:t._s(t.highlightKeyword(a.row.replierName))}})]}}])}),e("el-table-column",{attrs:{prop:"parentId",width:"120",label:"level"},scopedSlots:t._u([{key:"default",fn:function(a){return[null===a.row.parentId?e("i",{staticClass:"el-icon-warning",staticStyle:{"margin-right":"5px"}}):e("i",{staticClass:"el-icon-success",staticStyle:{"margin-right":"5px",color:"rgb(253, 199, 50)"}}),null===a.row.parentId?e("span",{staticStyle:{"text-decoration":"underline","text-decoration-style":"dashed"}},[t._v("parent-level")]):e("span",[t._v("sub-level")])]}}])}),e("el-table-column",{attrs:{label:"data manipulation",width:"100px",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"text-button",on:{click:function(e){return t.handleDelete(a.row)}}},[t._v("delete")])]}}])})],1),e("el-pagination",{staticStyle:{margin:"10px 0"},attrs:{"current-page":t.currentPage,"page-sizes":[20,50],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.totalItems},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),e("el-dialog",{attrs:{title:"","show-close":!1,visible:t.reportDialog,width:"35%"},on:{"update:visible":function(e){t.reportDialog=e}}},[e("div",{staticStyle:{padding:"25px 0 0 20px"},attrs:{slot:"title"},slot:"title"},[e("span",{staticStyle:{"font-size":"18px","font-weight":"800"}},[t._v("Reporting details")])]),e("el-row",{staticStyle:{padding:"10px 20px 20px 20px"}},[e("el-col",{attrs:{span:12}},[e("PieChart",{attrs:{types:t.types,values:t.values}})],1),e("el-col",{attrs:{span:12}},[e("el-row",{staticClass:"main"},[t.reportsDate.length?t._e():e("div",[e("span",{staticClass:"count"},[t._v("No data available")])]),t._l(t.reportsDate,(function(a,s){return e("el-col",{key:s,staticClass:"item",attrs:{span:6}},[e("div",{staticClass:"count",staticStyle:{"margin-top":"20px"}},[e("span",[t._v(" "+t._s(a.count)+" ")])]),e("div",[t._v(t._s(a.name))])])}))],2)],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticClass:"customer",staticStyle:{"background-color":"rgb(241, 241, 241)",border:"none"},attrs:{size:"small"},on:{click:function(e){t.reportDialog=!1}}},[t._v("Cancel")])],1)],1)],1)},i=[],o=a("ceb0"),n=a("748a"),l={components:{Editor:o["a"],PieChart:n["a"]},data(){return{data:{cover:""},reportsDate:[],filterText:"",tableData:[],currentPage:1,pageSize:10,totalItems:0,dialogOperaion:!1,isOperation:!1,searchTime:[],selectedRows:[],html:{},fileList:[],dynamicTags:["Healthy","Wellness"],inputVisible:!1,inputValue:"",coverDialog:!1,commentDialog:!1,evaluationsList:[],selectedRows:[],count:0,evaluationsDelete:!1,idToDelete:null,contentDialog:!1,reportDialog:!1,types:[],values:[],evalustionsQueryDto:{}}},created(){this.fetchFreshData()},methods:{keySearch(){this.fetchFreshData()},reportsList(t){this.reportDialog=!0,this.reportList(t.id)},async reportList(t){const e=await this.$axios("/evaluations-reports/reportCount/"+t),{data:a}=e;this.reportsDate=a.data,this.types=this.reportsDate.map(t=>t.name),this.values=this.reportsDate.map(t=>t.count)},showContent(t){this.data=t,this.contentDialog=!0},async removeEvaluations(t){this.evaluationsDelete=!0,this.idToDelete=t},confirmDelete(){this.$axios.delete("/evaluations/delete/"+this.idToDelete).then(t=>{this.$message[200===t.data.code?"success":"error"](t.data.msg),200===t.data.code&&(this.evaluationsDelete=!1,this.loadEvaluationsList())}).catch(t=>{console.log(t)})},handleEvaluationsClose(){this.commentDialog=!1},commentList(t){this.data=t,this.commentDialog=!0,this.loadEvaluationsList()},async loadEvaluationsList(){try{const t=await this.$axios.get(`/evaluations/list/${this.data.id}/evaluations`);this.evaluationsList=t.data.data.data,this.count=t.data.data.count}catch(t){console.error("Load comment list exception:",t)}},showPic(t){this.data=t,this.coverDialog=!0},handleClose(t){this.dynamicTags.splice(this.dynamicTags.indexOf(t),1)},showInput(){this.inputVisible=!0,this.$nextTick(t=>{this.$refs.saveTagInput.$refs.input.focus()})},handleInputConfirm(){let t=this.inputValue;t&&this.dynamicTags.push(t),this.inputVisible=!1,this.inputValue=""},goBack(){this.data={},this.dialogOperaion=!1},goBackPage(){this.data={},this.commentDialog=!1},handleSelectionChange(t){this.selectedRows=t},async batchDelete(){if(!this.selectedRows.length)return void this.$message("No data selected");const t=await this.$swalConfirm({title:"Delete comment data",text:"Deleted unrecoverable, do you continue?",icon:"warning"});if(t)try{let t=this.selectedRows.map(t=>t.id);const e=await this.$axios.post("/evaluations/batchDelete",t);if(200===e.data.code)return this.$swal.fire({title:"Delete Hint",text:e.data.msg,icon:"success",showConfirmButton:!1,timer:2e3}),void this.fetchFreshData()}catch(e){this.$swal.fire({title:"Error Hint",text:e,icon:"error",showConfirmButton:!1,timer:2e3}),console.error("Comment message deletion anomaly: ",e)}},highlightKeyword(t){if(null!=t){if(""!=this.filterText){const e=new RegExp(this.filterText,"gi");return t.replace(e,'<span class="highlight" style="background-color: #bec936;color:#373834;">$&</span>')}return t}},resetQueryCondition(){this.filterText="",this.searchTime="",this.fetchFreshData()},async updateOperation(){try{const t=await this.$axios.put("/evaluations/update",this.data);this.$message[200===t.data.code?"success":"error"](t.data.msg),200===t.data.code&&(this.closeDialog(),this.fetchFreshData(),this.clearFormData())}catch(t){console.error("Error when submitting form:",t),this.$message.error("Submission failed, please try again later!")}},async addOperation(){this.data.tag=this.dynamicTags.join(",");try{const t=await this.$axios.post("/evaluations/save",this.data);this.$message[200===t.data.code?"success":"error"](t.data.msg),200===t.data.code&&(this.closeDialog(),this.fetchFreshData(),this.clearFormData())}catch(t){console.error("Error when submitting form:",t),this.$message.error("Submission failed, please try again later!")}},closeDialog(){this.dialogOperaion=!1},clearFormData(){this.data={},this.html="",this.fileList=[]},async fetchFreshData(){try{let t="",e="";if(null!==this.searchTime&&2===this.searchTime.length){const[a,s]=await Promise.all(this.searchTime.map(t=>t.toISOString()));t=a.split("T")[0]+"T00:00:00",e=s.split("T")[0]+"T23:59:59"}const a={current:this.currentPage,size:this.pageSize,startTime:t,endTime:e,...this.evalustionsQueryDto};let s=await this.$axios.post("/evaluations/query",a);const{data:i}=s;this.tableData=i.data,this.totalItems=i.total}catch(t){console.error("Fetch data failed:",t)}},add(){this.dialogOperaion=!0},handleFilter(){this.currentPage=1,this.fetchFreshData()},handleSizeChange(t){this.pageSize=t,this.currentPage=1,this.fetchFreshData()},handleCurrentChange(t){this.currentPage=t,this.fetchFreshData()},handleEdit(t){this.dialogOperaion=!0,this.isOperation=!0,this.data=t,console.log(this.data)},async handleDelete(t){this.selectedRows.push(t),this.batchDelete()}}},r=l,c=(a("f18b"),a("2877")),h=Object(c["a"])(r,s,i,!1,null,"9f4b967e",null);e["default"]=h.exports},b047:function(t,e,a){},d200:function(t,e,a){},f18b:function(t,e,a){"use strict";a("b047")}}]);
//# sourceMappingURL=chunk-6b1e7ddc.9953d2b9.js.map