(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d208caa"],{a5ff:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("el-row",{staticStyle:{"background-color":"#FFFFFF",padding:"10px 0","border-radius":"5px"}},[t("el-row",{staticStyle:{padding:"10px","margin-left":"5px"}},[t("el-row",[t("el-date-picker",{staticStyle:{"margin-left":"10px",width:"220px"},attrs:{size:"small",type:"daterange","range-separator":"to","start-placeholder":"Message Start","end-placeholder":"Message End"},model:{value:e.searchTime,callback:function(t){e.searchTime=t},expression:"searchTime"}}),t("el-input",{staticStyle:{width:"188px","margin-left":"5px","margin-right":"6px"},attrs:{size:"small",placeholder:"Message Content",clearable:""},on:{clear:e.handleFilterClear},model:{value:e.messageQueryDto.content,callback:function(t){e.$set(e.messageQueryDto,"content",t)},expression:"messageQueryDto.content"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleFilter},slot:"append"})],1),t("span",{staticStyle:{float:"right"}},[t("el-button",{staticClass:"customer",staticStyle:{"background-color":"rgb(96, 98, 102)",color:"rgb(247,248,249)",border:"none"},attrs:{size:"small",type:"info"},on:{click:e.allMessagePush}},[t("i",{staticClass:"el-icon-plus"}),e._v("Targeted Push")])],1)],1)],1),t("el-row",{staticStyle:{margin:"0 20px","border-top":"1px solid rgb(245,245,245)"}},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[t("el-table-column",{attrs:{prop:"name",width:"98",label:"Read Status"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.isRead?"Read":"Unread"))])]}}])}),t("el-table-column",{attrs:{prop:"messageType",width:"148",label:"Message Type"},scopedSlots:e._u([{key:"default",fn:function(a){return[1===a.row.messageType?t("span",[e._v("Comment Reply")]):2===a.row.messageType?t("span",[e._v("Comment Like")]):3===a.row.messageType?t("span",[e._v("Metric Reminder")]):t("span",[e._v("System Notification")])]}}])}),t("el-table-column",{attrs:{prop:"receiverName",width:"108",label:"Receiver"}}),t("el-table-column",{attrs:{prop:"content",label:"Message Body"}}),t("el-table-column",{attrs:{prop:"createTime",width:"168",label:"Sent Time"}}),t("el-table-column",{attrs:{label:"Actions",width:"88"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticClass:"text-button",on:{click:function(t){return e.handleDelete(a.row)}}},[e._v("Delete")])]}}])})],1),t("el-pagination",{staticStyle:{margin:"20px 0"},attrs:{"current-page":e.currentPage,"page-sizes":[10,20],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalItems},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("el-dialog",{attrs:{"show-title":!1,"show-close":!1,visible:e.dialogMessageOperation,width:"24%"},on:{"update:visible":function(t){e.dialogMessageOperation=t}}},[t("p",{staticStyle:{padding:"20px 0  0 20px"}},[e._v("Message Push")]),t("div",{staticStyle:{padding:"0 20px"}},[t("el-row",[t("span",{staticClass:"dialog-hover"},[e._v("Message Content")]),t("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"Message Content"},model:{value:e.messageContent,callback:function(t){e.messageContent=t},expression:"messageContent"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"customer",staticStyle:{"background-color":"rgb(43, 121, 203)",border:"none"},attrs:{size:"small",type:"info"},on:{click:e.messagePushOperation}},[e._v("Confirm Push")]),t("el-button",{staticClass:"customer",staticStyle:{"background-color":"rgb(241, 241, 241)",border:"none"},attrs:{size:"small"},on:{click:function(t){e.dialogMessageOperation=!1}}},[e._v("Cancel")])],1)])],1)},i=[],o={data(){return{data:{},filterText:"",currentPage:1,pageSize:10,totalItems:0,tableData:[],searchTime:[],selectedRows:[],messageQueryDto:{},messsageContent:"",messageTypeList:[],dialogMessageOperation:!1,messageContent:""}},created(){this.fetchFreshData(),this.loadAllMessageType()},methods:{messagePushOperation(){const e={content:this.messageContent};this.$axios.post("/message/systemInfoUsersSave",e).then(e=>{const{data:t}=e;200===t.code&&(this.$notify({duration:2e3,title:"Push Operation",message:"Success",type:"success"}),this.dialogMessageOperation=!1,this.messageContent="")})},allMessagePush(){this.dialogMessageOperation=!0},loadAllMessageType(){this.$axios.get("/message/types").then(e=>{const{data:t}=e;200===t.code&&(this.messageTypeList=t.data)})},async batchDelete(){if(!this.selectedRows.length)return void this.$message("No data selected");const e=await this.$swalConfirm({title:"Delete Message Data",text:"This action cannot be undone. Do you want to proceed?",icon:"warning"});if(e)try{let e=this.selectedRows.map(e=>e.id);const t=await this.$axios.post("/message/batchDelete",e);if(200===t.data.code)return this.$swal.fire({title:"Delete Notification",text:t.data.msg,icon:"success",showConfirmButton:!1,timer:2e3}),void this.fetchFreshData()}catch(t){console.error("Error deleting message information:",t)}},resetQueryCondition(){this.messageQueryDto={},this.searchTime=[],this.fetchFreshData()},async fetchFreshData(){try{let e=null,t=null;if(null!=this.searchTime&&2===this.searchTime.length){const[a,s]=await Promise.all(this.searchTime.map(e=>e.toISOString()));e=a.split("T")[0]+"T00:00:00",t=s.split("T")[0]+"T23:59:59"}const a={current:this.currentPage,size:this.pageSize,startTime:e,endTime:t,...this.messageQueryDto},s=await this.$axios.post("/message/query",a),{data:i}=s;this.tableData=i.data,this.totalItems=i.total}catch(e){console.error("Error fetching message data:",e)}},add(){this.dialogUserOperaion=!0},handleFilter(){this.currentPage=1,this.fetchFreshData()},handleFilterClear(){this.filterText="",this.handleFilter()},handleSizeChange(e){this.pageSize=e,this.currentPage=1,this.fetchFreshData()},handleCurrentChange(e){this.currentPage=e,this.fetchFreshData()},handleEdit(e){this.dialogUserOperaion=!0,this.isOperation=!0,this.data={...e}},handleDelete(e){this.selectedRows.push(e),this.batchDelete()}}},n=o,l=a("2877"),r=Object(l["a"])(n,s,i,!1,null,"291a1dde",null);t["default"]=r.exports}}]);
//# sourceMappingURL=chunk-2d208caa.13698e35.js.map